{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/Bird.vue?9b88","webpack:///./src/App.vue?1851","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/TicTacToe.vue?b6f3","webpack:///./src/utils/victoryCheckGroups/horizontalGroup.js","webpack:///./src/utils/victoryCheckGroups/verticalGroup.js","webpack:///./src/utils/victoryCheckGroups/obliquelyGroup.js","webpack:///src/TicTacToe.vue","webpack:///src/Bird.vue","webpack:///./src/TicTacToe.vue?29ce","webpack:///./src/TicTacToe.vue","webpack:///./src/Square.vue?78d9","webpack:///src/Square.vue","webpack:///./src/Square.vue?c5c7","webpack:///./src/Square.vue","webpack:///./src/Bird.vue?d472","webpack:///./src/Bird.vue?b2d8","webpack:///./src/Bird.vue","webpack:///./src/Snake.vue?a715","webpack:///src/Snake.vue","webpack:///./src/Snake.vue?a8b9","webpack:///./src/Snake.vue","webpack:///./src/router.js","webpack:///./src/main.js","webpack:///./src/TicTacToe.vue?f9f6","webpack:///./src/Snake.vue?f5d0","webpack:///./src/Square.vue?1800","webpack:///./src/App.vue?3ff0"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","on","$event","stopPropagation","staticRenderFns","prevRouteName","localStorage","getItem","watch","$route","to","meta","isReload","setItem","location","reload","component","_s","victories","X","O","trainingGames","duelGames","timer","Math","round","_l","agents","concat","agent","agentIndex","sign","cellIndex","class","alive","isAlive","victory","isVictory","duel","victoriesStatus","_m","AIvsHuman","setHumanSign","isDuel","AIvsHumanReset","saveModelsOnPC","localStorageClear","restoreModelsFromGitHub","horizontalGroup","field","success","verticalGroup","start","step","iSave","obliquelyGroup","modelX","modelO","trainingCount","training","fieldSize","timeTraining","rewards","methods","restoreFromLocalStorage","JSON","parse","setupModel","model","add","inputShape","activation","units","compile","optimizer","loss","agentsSetting","setTimer","setTimeout","saveInLocalStorage","stringify","increasingInterest","signNextTurn","isWinner","interestReward","getStepInput","recalculateRewards","map","reward","index","basicReward","worstReward","determineWinner","saveTraining","inputs","input","labels","label","trafficLights","type","cell","bestReward","stepReward","lossReward","trainingReset","clear","alives","generation","ref","indexOf","_k","keyCode","handleJumpTop","button","handleJumpRight","handleJumpBottom","handleJumpLeft","cellValue","available","_e","investigatedMaximumCellValue","maximumCellValue","actor","id","style","gridRow","y","gridColumn","x","refInFor","learning","isDisplayingActors","actors","actorsCount","rate","metrics","fieldSetting","sqrt","max","$refs","container","setProperty","actorsReset","getRandomPredict","getDirectionStep","jumpRight","maximum","action","jumpBottom","jumpLeft","jumpTop","getAntennaCellValues","getBestMoves","forEach","firstCellValue","fiveCellValue","fourCellValue","thirdCellValue","secondCellValue","fiveIndex","fourIndex","thirdIndex","secondIndex","firstIndex","firstInput","firstLabel","secondInput","secondLabel","thirdInput","thirdLabel","fourInput","fourLabel","fiveInput","fiveLabel","agentUp","intersected","isIntersected","transform","wall","walls","destroyed","cancelAnimationFrame","rafId","agentSetting","root","gameLoop","requestAnimationFrame","tween","stop","agentDown","agentFell","console","log","agentsReset","distance","maximumDistanceToIntersection","stopWallsMovement","restartWallsMovement","rerunWallMovement","from","hasWallIntersectionWithAgent","width","saveLearning","barrier","backgroundColor","position","Array","cells","actorDefault","undefined","mounted","setStyle","resetCells","markCells","appleSign","appleReward","$forceUpdate","snake","String","barrierSign","barrierReward","cellEmpty","stepTails","resetTail","stepHead","side","hasAvailability","stepTop","stepRight","stepBottom","stepLeft","resetGame","Vue","use","VueRouter","routes","path","App","redirect","TicTacToe","Square","Bird","Snake","config","productionTip","silent","process","router","render","h","$mount"],"mappings":"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","file":"js/app.48ff1c77.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bird.vue?vue&type=style&index=0&id=c5ebb58e&scoped=true&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bird.vue?vue&type=style&index=0&id=c5ebb58e&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"App\"},[_c('div',{staticClass:\"routers\"},[_c('div',{staticClass:\"title\"},[_vm._v(\" ПРОЕКТЫ \")]),_c('div',{staticClass:\"buttons\"},[_c('router-link',{staticClass:\"route\",attrs:{\"to\":{ name: 'TicTacToe' }}},[_vm._v(\" Крестики нолики \"),_c('span',[_vm._v(\"(Завершён)\")])]),_c('router-link',{staticClass:\"route\",attrs:{\"to\":{ name: 'Square' }}},[_vm._v(\" Квадрат в лабиринте \"),_c('span',[_vm._v(\"(Завершён)\")]),_c('a',{staticClass:\"link\",attrs:{\"href\":\"https://habr.com/ru/post/452612\",\"target\":\"_blank\"},on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._v(\" _Статья__ \")])]),_c('router-link',{staticClass:\"route\",attrs:{\"to\":{ name: 'Snake' }}},[_vm._v(\" Змейка \"),_c('span',[_vm._v(\"(В разработке)\")])]),_c('router-link',{staticClass:\"route\",attrs:{\"to\":{ name: 'Bird' }}},[_vm._v(\" Птица \"),_c('span',[_vm._v(\"(Приостановлен)\")])])],1)]),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"App\">\n    <div class=\"routers\">\n      <div class=\"title\">\n        ПРОЕКТЫ\n      </div>\n\n      <div class=\"buttons\">\n        <router-link\n          :to=\"{ name: 'TicTacToe' }\"\n          class=\"route\"\n        >\n          Крестики нолики <span>(Завершён)</span>\n        </router-link>\n\n        <router-link\n          :to=\"{ name: 'Square' }\"\n          class=\"route\"\n        >\n          Квадрат в лабиринте <span>(Завершён)</span>\n\n          <a\n            href=\"https://habr.com/ru/post/452612\"\n            target=\"_blank\"\n            class=\"link\"\n            @click.stop\n          >\n            _Статья__\n          </a>\n        </router-link>\n\n        <router-link\n          :to=\"{ name: 'Snake' }\"\n          class=\"route\"\n        >\n          Змейка <span>(В разработке)</span>\n        </router-link>\n\n        <router-link\n          :to=\"{ name: 'Bird' }\"\n          class=\"route\"\n        >\n          Птица <span>(Приостановлен)</span>\n        </router-link>\n      </div>\n    </div>\n\n    <router-view />\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App',\n\n  data() {\n    return {\n      prevRouteName: localStorage.getItem('prevRouteName'),\n    };\n  },\n\n  watch: {\n    $route(to) {\n      if (to.meta.isReload && to.name !== this.prevRouteName) {\n        localStorage.setItem('prevRouteName', to.name);\n        window.location.reload();\n      }\n    },\n  },\n};\n</script>\n\n<style\n  lang=\"scss\"\n  scoped\n>\n.App {\n}\n\n.title {\n  margin-bottom: 10px;\n  font-weight: bold;\n  font-size: 20px;\n}\n\n.routers {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  padding: 10px;\n  color: gray;\n\n  .route {\n    margin-top: 5px;\n    color: gray;\n    text-decoration: none;\n\n    &:visited {\n      color: gray;\n    }\n\n    &.router-link-exact-active {\n      font-weight: bold;\n    }\n\n    .link {\n      color: white;\n\n      &:visited {\n        color: white;\n      }\n    }\n  }\n\n  .route span {\n    font-size: 13px;\n    color: dimgray;\n  }\n}\n\n.buttons {\n  display: flex;\n  flex-direction: column;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=d878f2aa&scoped=true&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=d878f2aa&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d878f2aa\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"TicTacToe\"},[_c('div',{staticClass:\"stat\"},[_c('div',{staticClass:\"title\"},[_c('span',[_vm._v(\"Победы в соревнованиях:\")]),_c('span',{staticClass:\"X\"},[_vm._v(\" X \")]),_c('span',{staticClass:\"victory\"},[_vm._v(\" \"+_vm._s(_vm.victories.X)+\" \")]),_vm._v(\" ˑ \"),_c('span',{staticClass:\"O\"},[_vm._v(\" O \")]),_c('span',{staticClass:\"victory\"},[_vm._v(\" \"+_vm._s(_vm.victories.O)+\" \")])]),_c('div',{staticClass:\"description\"},[_vm._v(\" Количество тренировок и соревнований: \"+_vm._s(_vm.trainingGames + _vm.duelGames)+\" \")]),_c('div',{staticClass:\"timer\"},[_vm._v(\" Время обучения: \"+_vm._s(_vm.timer)+\" секунд (~\"+_vm._s(Math.round(_vm.timer / 60))+\" минут) \")])]),_c('div',{staticClass:\"fields-container\"},[_c('div',{staticClass:\"fields\"},_vm._l((_vm.agents.X.concat(_vm.agents.O)),function(agent,agentIndex){return _c('div',{key:agentIndex,staticClass:\"field\"},[_vm._l((agent.field),function(sign,cellIndex){return _c('div',{key:(agentIndex + \":\" + cellIndex),class:['cell', {\n            sign: sign,\n            alive: agent.isAlive,\n            victory: agent.isVictory,\n          }]},[_vm._v(\" \"+_vm._s(sign)+\" \")])}),_c('div',{staticClass:\"caption\"},[_vm._v(\" Поле игрока: \"+_vm._s(agent.sign)+\" \")])],2)}),0),_c('div',{staticClass:\"duel-field\"},[_vm._l((_vm.duel.field),function(sign,cellIndex){return _c('div',{key:cellIndex,class:['cell', sign, { victory: _vm.victoriesStatus[sign] }]},[_vm._v(\" \"+_vm._s(sign)+\" \")])}),_c('div',{staticClass:\"caption\"},[_vm._v(\" Поле для соревнований \")])],2)]),_vm._m(0),_c('div',{staticClass:\"ai-vs-human-container\"},[_c('div',{staticClass:\"result\"},[_c('span',{staticClass:\"X\"},[_vm._v(\" X \")]),_c('span',{class:[_vm.AIvsHuman.victories.X >= 0 ? 'success' : 'loss']},[_vm._v(\" \"+_vm._s(_vm.AIvsHuman.victories.X)+\" \")]),_vm._v(\" ˑ \"),_c('span',{staticClass:\"O\"},[_vm._v(\" O \")]),_c('span',{class:[_vm.AIvsHuman.victories.O >= 0 ? 'success' : 'loss']},[_vm._v(\" \"+_vm._s(_vm.AIvsHuman.victories.O)+\" \")])]),_c('div',{staticClass:\"caption\"},[_vm._v(\" Человек против AI \")]),_c('div',{staticClass:\"field\"},_vm._l((_vm.AIvsHuman.field),function(sign,cellIndex){return _c('div',{key:cellIndex,class:['cell', sign, { victory: _vm.victoriesStatus[sign] }],on:{\"click\":function($event){return _vm.setHumanSign(cellIndex)}}},[_vm._v(\" \"+_vm._s(sign)+\" \")])}),0),_c('button',{class:['resume', 'button', { 'is-duel': _vm.AIvsHuman.isDuel }],on:{\"click\":_vm.AIvsHumanReset}},[_vm._v(\" Продолжить обучение \")]),_c('div',{staticClass:\"models-controller\"},[_c('div',{staticClass:\"button-container\"},[_c('button',{staticClass:\"button\",on:{\"click\":_vm.saveModelsOnPC}},[_vm._v(\" Сохранить модели на компьютер \")])]),_c('div',{staticClass:\"button-container\"},[_c('button',{staticClass:\"button\",on:{\"click\":_vm.localStorageClear}},[_vm._v(\" Очистить локальное хранилище \")])]),_c('div',{staticClass:\"button-container\"},[_c('button',{staticClass:\"button\",on:{\"click\":_vm.restoreModelsFromGitHub}},[_vm._v(\" Ввести модели из GitHub \")])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"fields-description\"},[_c('div',[_vm._v(\"Первая игра - игроки на своих полях, вторая игра - соревнование.\")]),_c('div',[_vm._v(\"Подсветка золотистым - победа. Цель обучения - сводить игру в ничью.\")]),_c('br'),_c('b',[_vm._v(\"Начать игру с AI можно поставив знак на поле ниже - обучение приостановится.\")])])}]\n\nexport { render, staticRenderFns }","/* eslint-disable no-plusplus */\n\n// Самая проставя группа для проверки выигрыша.\n// Проверяется простановка игроком всех ячеек в каждом из 3х наборов.\n\n// Выигрышные наборы для первой группы:\n//  1.  2.  3.\n// XXX *** ***\n// *** XXX ***\n// *** *** XXX\nexport default function horizontalGroup({ field, sign }) {\n  // Будет равен 3, если нужные ячейки равны знаку игрока,\n  // в этом случае, победа засчитывается за этим игроком.\n  let success = 0;\n\n  // Разделение на наборы по 3 ячейки подряд.\n  // Достигнута 3 ячейка по горизонтали - переходит на следующий набор.\n  for (let i = 0; i < field.length; i++) {\n    // Если ячейка - текущего игрока, то засчитывается очко.\n    // Для победы нужно 3 очка для одного из наборов, в случае,\n    // если не равны, то не имеет смысла проверять дальше,\n    // нужно переходить в следующий набор.\n    if (field[i] === sign) {\n      success += 1;\n    } else {\n      success = 0;\n\n      // В следующей ячейке не текущий знак - переход на следующий набор,\n      // пока не получим 3 для +1 элемента, а на выходе из цикла\n      // индекс будет началом для следующего набора.\n      // Примеры: 2 % 3 === 2, 3 % 3 === 0 | 5 % 3 === 5, 6 % 3 === 0\n      while ((i % 3) + 1 !== 3) {\n        i += 1;\n      }\n    }\n\n    // С 3 очками, игрок выходит победителем.\n    if (success === 3) {\n      return true;\n    }\n  }\n\n  // Переход на следующую группу для проверки победы.\n  return false;\n}\n","/* eslint-disable no-plusplus */\n\n// Группа усложнена тем, что знаки расположены во всех 3х наборах.\n// Знак игрока проверяется в каждом из 3х наборов в той же вертикали.\n\n// Выигрышные наборы для второй группы:\n//  1.  2.  3.\n// X** *X* **X\n// X** *X* **X\n// X** *X* **X\n\n// Принимает сдвиги, что позволило объединиться с 3 выигрышным набором.\nexport default function verticalGroup({ field, sign, start, step }) {\n  // Будет равен 3, если нужные ячейки равны знаку игрока,\n  // в этом случае, победа засчитывается за этим игроком.\n  let success = 0;\n  // Сохранение позиции для найденного совпадения,\n  // когда нужно будет продолжить поиск в следующем наборе.\n  let iSave = 0;\n\n  // Разделение на наборы по 3 ячейки (каждая по 3).\n  // Достигнута 3 ячейка (вертикаль) - переходит на следующий набор.\n  // Для победы нужны совпадения 3х ячеек в 3х наборах на тех же позициях.\n  for (let i = start; i < field.length; i++) {\n    // Сброс совпадений при переходе на вне групповую ячейку.\n    // Каждая 3 ячейка (вертикаль) начиная с самой первой - нулевой.\n    if (field[i] === sign) {\n      success += 1;\n\n      // Защита от переполнения в процессе проверки всех ячеек в группе.\n      // Для возможности вернуться на эту позицию для продолжения поиска,\n      // когда ячейка принадлежала игроку в предыдущий совпавший раз.\n      if (success === 1) {\n        iSave = i;\n      }\n\n      // Переход к следующей группе (вертикаль).\n      // Еще +1 даст инкремент цикла.\n      i += step;\n    } else {\n      // Ранее было найдено совпадение, но для этого знака - его нет.\n      if (success !== 0) {\n        // Возврат на сохраненную позицию - первого найденного совпадения.\n        i = iSave;\n      }\n\n      success = 0;\n\n      // Выходит из итерации - дошел до последнего набора (вертикаль).\n      if (i === 2) {\n        break;\n      }\n    }\n\n    // С 3 очками, игрок выходит победителем.\n    if (success === 3) {\n      return true;\n    }\n  }\n\n  // Переход на следующую группу для проверки победы.\n  return false;\n}\n","import verticalGroup from './verticalGroup';\n\n// Выигрышные наборы для третьей группы:\n//  1.  2.\n// X** **X\n// *X* *X*\n// **X X**\n\n// Проверка 1 и 2 наборов.\nexport default function obliquelyGroup({ field, sign }) {\n  return verticalGroup({ field, sign, start: 0, step: 3 })\n    || verticalGroup({ field, sign, start: 2, step: 1 });\n}\n","<template>\n  <div class=\"TicTacToe\">\n    <div class=\"stat\">\n      <div class=\"title\">\n        <span>Победы в соревнованиях:</span>\n\n        <span class=\"X\">\n          X\n        </span>\n\n        <span class=\"victory\">\n          {{ victories.X }}\n        </span>\n        ˑ\n        <span class=\"O\">\n          O\n        </span>\n\n        <span class=\"victory\">\n          {{ victories.O }}\n        </span>\n      </div>\n\n      <div class=\"description\">\n        Количество тренировок и соревнований: {{ trainingGames + duelGames }}\n      </div>\n\n      <div class=\"timer\">\n        Время обучения: {{ timer }} секунд (~{{ Math.round(timer / 60) }} минут)\n      </div>\n    </div>\n\n    <div class=\"fields-container\">\n      <div class=\"fields\">\n        <div\n          v-for=\"(agent, agentIndex) in agents.X.concat(agents.O)\"\n          :key=\"agentIndex\"\n          class=\"field\"\n        >\n          <div\n            v-for=\"(sign, cellIndex) in agent.field\"\n            :key=\"`${agentIndex}:${cellIndex}`\"\n            :class=\"['cell', {\n              sign,\n              alive: agent.isAlive,\n              victory: agent.isVictory,\n            }]\"\n          >\n            {{ sign }}\n            <!--{{ agent.rewards[cellIndex].toFixed(1) }}-->\n          </div>\n\n          <div class=\"caption\">\n            Поле игрока: {{ agent.sign }}\n          </div>\n        </div>\n      </div>\n\n      <div class=\"duel-field\">\n        <div\n          v-for=\"(sign, cellIndex) in duel.field\"\n          :key=\"cellIndex\"\n          :class=\"['cell', sign, { victory: victoriesStatus[sign] }]\"\n        >\n          {{ sign }}\n        </div>\n\n        <div class=\"caption\">\n          Поле для соревнований\n        </div>\n      </div>\n    </div>\n\n    <div class=\"fields-description\">\n      <div>Первая игра - игроки на своих полях, вторая игра - соревнование.</div>\n      <div>Подсветка золотистым - победа. Цель обучения - сводить игру в ничью.</div>\n      <br>\n      <b>Начать игру с AI можно поставив знак на поле ниже - обучение приостановится.</b>\n    </div>\n\n    <div class=\"ai-vs-human-container\">\n      <div class=\"result\">\n        <span class=\"X\">\n          X\n        </span>\n\n        <span :class=\"[AIvsHuman.victories.X >= 0 ? 'success' : 'loss']\">\n          {{ AIvsHuman.victories.X }}\n        </span>\n        ˑ\n        <span class=\"O\">\n          O\n        </span>\n\n        <span :class=\"[AIvsHuman.victories.O >= 0 ? 'success' : 'loss']\">\n          {{ AIvsHuman.victories.O }}\n        </span>\n      </div>\n\n      <div class=\"caption\">\n        Человек против AI\n      </div>\n\n      <div class=\"field\">\n        <div\n          v-for=\"(sign, cellIndex) in AIvsHuman.field\"\n          :key=\"cellIndex\"\n          :class=\"['cell', sign, { victory: victoriesStatus[sign] }]\"\n          @click=\"setHumanSign(cellIndex)\"\n        >\n          {{ sign }}\n        </div>\n      </div>\n\n      <button\n        :class=\"['resume', 'button', { 'is-duel': AIvsHuman.isDuel }]\"\n        @click=\"AIvsHumanReset\"\n      >\n        Продолжить обучение\n      </button>\n\n      <div class=\"models-controller\">\n        <div class=\"button-container\">\n          <button\n            class=\"button\"\n            @click=\"saveModelsOnPC\"\n          >\n            Сохранить модели на компьютер\n          </button>\n        </div>\n\n        <div class=\"button-container\">\n          <button\n            class=\"button\"\n            @click=\"localStorageClear\"\n          >\n            Очистить локальное хранилище\n          </button>\n        </div>\n\n        <div class=\"button-container\">\n          <button\n            class=\"button\"\n            @click=\"restoreModelsFromGitHub\"\n          >\n            Ввести модели из GitHub\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as tf from '@tensorflow/tfjs';\nimport { victoryCheckGroups as hasVictory } from './utils';\n\nconst isAutomatic = true;\nconst isDuel = true;\nconst isDelay = false;\n\n// Занижение награды для X, чтобы O получил преимущество, из за того, что X ходит первым.\nconst worstReward = -1;\nconst lossReward = -0.7;\nconst basicReward = 0.1;\nconst stepReward = 0.3;\nconst interestReward = 0.7;\nconst bestReward = 1;\n\nexport default {\n  name: 'TicTacToe',\n\n  data() {\n    return {\n      modelX: tf.sequential(),\n      modelO: tf.sequential(),\n      trainingCount: { X: 0, O: 0 },\n      training: {\n        X: { inputs: [], labels: [] },\n        O: { inputs: [], labels: [] },\n      },\n      agents: { X: [], O: [] },\n      victories: { X: 0, O: 0 },\n      victoriesStatus: { X: false, O: false },\n\n      fieldSize: 9,\n      step: 1,\n      trainingGames: 1,\n\n      timer: 0,\n      timeTraining: 5 * 60,\n\n      isDuel: false,\n      duel: {\n        step: 1,\n        field: [\n          '', '', '',\n          '', '', '',\n          '', '', '',\n        ],\n      },\n      duelGames: 1,\n\n      AIvsHuman: {\n        isDuel: false,\n        step: 1,\n        victories: { X: 0, O: 0 },\n        rewards: [\n          0.1, 0.1, 0.1,\n          0.1, 0.1, 0.1,\n          0.1, 0.1, 0.1,\n        ],\n        field: [\n          '', '', '',\n          '', '', '',\n          '', '', '',\n        ],\n      },\n    };\n  },\n\n  async mounted() {\n    const timer = JSON.parse(localStorage.getItem('syntet_TicTacToe_timer'));\n\n    if (timer) {\n      this.timer = timer;\n      this.restoreFromLocalStorage();\n\n      const [modelX, modelO] = await Promise.all([\n        tf.loadLayersModel('localstorage://syntet_TicTacToe_model_X'),\n        tf.loadLayersModel('localstorage://syntet_TicTacToe_model_O'),\n      ]);\n\n      localStorage.clear();\n\n      modelX.compile({\n        optimizer: 'adam',\n        loss: 'meanSquaredError',\n      });\n\n      modelO.compile({\n        optimizer: 'adam',\n        loss: 'meanSquaredError',\n      });\n\n      this.modelX = modelX;\n      this.modelO = modelO;\n    } else {\n      this.setupModel({ model: this.modelX });\n      this.setupModel({ model: this.modelO });\n    }\n\n    this.agentsSetting({ sign: 'X' });\n    this.agentsSetting({ sign: 'O' });\n\n    this.setTimer();\n\n    if (isAutomatic) {\n      this.gameLoop();\n    }\n  },\n\n  methods: {\n    restoreFromLocalStorage() {\n      this.trainingCount = JSON.parse(localStorage.getItem('syntet_TicTacToe_trainingCount'));\n      this.victories = JSON.parse(localStorage.getItem('syntet_TicTacToe_victories'));\n      this.trainingGames = JSON.parse(localStorage.getItem('syntet_TicTacToe_trainingGames'));\n      this.duelGames = JSON.parse(localStorage.getItem('syntet_TicTacToe_duelGames'));\n      this.AIvsHuman.victories = JSON.parse(localStorage.getItem('syntet_TicTacToe_AIvsHuman_victories'));\n    },\n\n    setupModel({ model }) {\n      model.add(tf.layers.dense({\n        // +1 - Количество ходов.\n        inputShape: [this.fieldSize + 1],\n        activation: 'sigmoid',\n        units: 128,\n      }));\n\n      // model.add(tf.layers.dense({\n      //   activation: 'sigmoid',\n      //   units: 48,\n      // }));\n\n      model.add(tf.layers.dense({\n        activation: 'sigmoid',\n        units: this.fieldSize,\n      }));\n\n      model.compile({\n        optimizer: 'adam',\n        loss: 'meanSquaredError',\n      });\n    },\n\n    agentsSetting({ sign }) {\n      this.agents[sign] = [\n        {\n          sign,\n          isAlive: true,\n          isVictory: false,\n          rewards: [\n            0.1, 0.1, 0.1,\n            0.1, 0.1, 0.1,\n            0.1, 0.1, 0.1,\n          ],\n          field: [\n            '', '', '',\n            '', '', '',\n            '', '', '',\n          ],\n        },\n      ];\n    },\n\n    setTimer() {\n      setTimeout(this.setTimer, 1000);\n      this.timer += 1;\n    },\n\n    async gameLoop() {\n      if (this.AIvsHuman.isDuel) {\n        this.agentsSetting({ sign: 'X' });\n        this.agentsSetting({ sign: 'O' });\n\n        await new Promise((resolve) => setTimeout(resolve, 300));\n        this.gameLoop();\n        return;\n      }\n\n      if (this.isDuel && isDuel) {\n        await this.startDuel();\n        this.duelGames += 1;\n      } else {\n        this.isDuel = this.trainingGames % this.fieldSize === 0;\n\n        await this.startTraining();\n        this.trainingGames += 1;\n      }\n\n      if (isDelay) {\n        await new Promise((resolve) => setTimeout(resolve, 300));\n      }\n\n      if (this.timer !== 0 && this.timer % this.timeTraining === 0) {\n        this.saveInLocalStorage();\n        await this.saveModelsLocal();\n\n        // Высвобождение ресурсов, чтобы не зависала вкладка.\n        window.location.reload();\n      }\n\n      this.gameLoop();\n    },\n\n    saveInLocalStorage() {\n      localStorage.setItem('syntet_TicTacToe_timer', JSON.stringify(this.timer));\n      localStorage.setItem('syntet_TicTacToe_trainingCount', JSON.stringify(this.trainingCount));\n      localStorage.setItem('syntet_TicTacToe_victories', JSON.stringify(this.victories));\n      localStorage.setItem('syntet_TicTacToe_trainingGames', JSON.stringify(this.trainingGames));\n      localStorage.setItem('syntet_TicTacToe_duelGames', JSON.stringify(this.duelGames));\n      localStorage.setItem('syntet_TicTacToe_AIvsHuman_victories', JSON.stringify(this.AIvsHuman.victories));\n    },\n\n    async saveModelsLocal() {\n      await this.modelX.save('localstorage://syntet_TicTacToe_model_X');\n      await this.modelO.save('localstorage://syntet_TicTacToe_model_O');\n    },\n\n    async startDuel() {\n      let taskCount = 2;\n\n      await new Promise((resolve) => {\n        const agents = this.agents.X.filter(({ isAlive }) => isAlive);\n        let count = agents.length;\n\n        if (count > 0) {\n          agents.forEach(async (agent) => {\n            await this.modelPredict({ model: this.modelX, agent });\n            count -= 1;\n\n            if (count === 0) {\n              resolve();\n            }\n          });\n        } else {\n          taskCount -= 1;\n          resolve();\n        }\n      });\n\n      await new Promise((resolve) => {\n        const agents = this.agents.O.filter(({ isAlive }) => isAlive);\n        let count = agents.length;\n\n        if (count > 0) {\n          agents.forEach(async (agent) => {\n            await this.modelPredict({ model: this.modelO, agent });\n            count -= 1;\n\n            if (count === 0) {\n              resolve();\n            }\n          });\n        } else {\n          taskCount -= 1;\n          resolve();\n        }\n      });\n\n      if (taskCount === 2) {\n        this.duel.step = this.fieldSize;\n      }\n\n      if (this.duel.step === this.fieldSize) {\n        await Promise.all([\n          this.modelFit({ model: this.modelX, sign: 'X' }),\n          this.modelFit({ model: this.modelO, sign: 'O' }),\n        ]);\n\n        this.isDuel = false;\n\n        this.duel = {\n          step: 1,\n          field: [\n            '', '', '',\n            '', '', '',\n            '', '', '',\n          ],\n        };\n      } else {\n        this.duel.step += 1;\n      }\n    },\n\n    // Знаки обучаются ходить.\n    async startTraining() {\n      const tasks = this.agents.X.filter(({ isAlive }) => isAlive)\n        .map((agent) => this.modelPredict({ model: this.modelX, agent }))\n        .concat(this.agents.O.filter(({ isAlive }) => isAlive)\n          .map((agent) => this.modelPredict({ model: this.modelO, agent })));\n\n      if (tasks.length === 0) {\n        this.step = this.fieldSize;\n      } else {\n        await Promise.all(tasks);\n      }\n\n      if (this.step === this.fieldSize) {\n        await Promise.all([\n          this.modelFit({ model: this.modelX, sign: 'X' }),\n          this.modelFit({ model: this.modelO, sign: 'O' }),\n        ]);\n\n        this.step = 1;\n      } else {\n        this.step += 1;\n      }\n    },\n\n    async modelPredict({ model, agent }) {\n      const step = this.isDuel ? this.duel.step : this.step;\n      const field = this.isDuel ? this.duel.field : agent.field;\n\n      this.increasingInterest({ field, agent });\n\n      const stepInput = this.getStepInput(step);\n      const predictions = await model.predict(tf.tensor2d([agent.rewards.concat([stepInput])])).data();\n      const cellIndex = predictions.indexOf(Math.max(...predictions));\n\n      if (field[cellIndex].length === 0) {\n        const { sign } = agent;\n        field.splice(cellIndex, 1, sign);\n\n        agent.rewards = this.recalculateRewards({ rewards: agent.rewards, field });\n        const isWinner = this.determineWinner({ field, sign });\n\n        if (isWinner) {\n          agent.isAlive = false;\n          agent.isVictory = true;\n          agent.rewards[cellIndex] = bestReward;\n\n          this.saveTraining({ type: 'winner', field, agent, stepInput });\n\n          if (this.isDuel) {\n            this.victories[sign] += 1;\n            this.victoriesStatus[sign] = true;\n          }\n        } else {\n          agent.rewards[cellIndex] = basicReward;\n          this.saveTraining({ type: 'step', field, agent, stepInput });\n        }\n      } else {\n        agent.isAlive = false;\n        agent.rewards = this.recalculateRewards({ rewards: agent.rewards, field });\n\n        this.saveTraining({ type: 'loss', field, agent, stepInput });\n      }\n    },\n\n    // Повышение интереса для хода к потенциально выигрышной ячейки противника.\n    increasingInterest({ field, agent }) {\n      const signNextTurn = agent.sign === 'X' ? 'O' : 'X';\n\n      for (let i = 0; i < field.length; i += 1) {\n        if (field[i].length === 0) {\n          field.splice(i, 1, signNextTurn);\n          const isWinner = this.determineWinner({ field, sign: signNextTurn });\n          field.splice(i, 1, '');\n\n          if (isWinner) {\n            agent.rewards[i] = interestReward;\n            break;\n          }\n        }\n      }\n    },\n\n    getStepInput(step) {\n      return 1 - (step / this.fieldSize);\n    },\n\n    recalculateRewards({ rewards, field }) {\n      return rewards.map((_, index) => {\n        let reward;\n\n        if (field[index].length === 0) {\n          reward = basicReward;\n        } else {\n          reward = worstReward;\n        }\n\n        return reward;\n      });\n    },\n\n    determineWinner({ field, sign }) {\n      return hasVictory.horizontalGroup({ field, sign })\n        || hasVictory.verticalGroup({ field, sign, start: 0, step: 2 })\n        || hasVictory.obliquelyGroup({ field, sign });\n    },\n\n    saveTraining({ type, field, agent, stepInput }) {\n      const { sign, rewards: label } = agent;\n      const input = field.map((cell) => this.trafficLights({ type, sign, cell })).concat([stepInput]);\n\n      this.training[sign].inputs.push(input);\n      this.training[sign].labels.push(label);\n\n      this.trainingCount[sign] += 1;\n    },\n\n    trafficLights({ type, sign, cell }) {\n      let reward = basicReward;\n\n      // Если ячейка свободна, то это нормально, но если занято другим знаком - это плохо.\n      if (type === 'winner') {\n        if (sign === cell) {\n          reward = bestReward;\n        } else if (cell.length === 0) {\n          reward = basicReward;\n        } else {\n          reward = worstReward;\n        }\n      } else if (type === 'step') {\n        if (sign === cell) {\n          reward = stepReward;\n        } else if (cell.length === 0) {\n          reward = basicReward;\n        } else {\n          reward = worstReward;\n        }\n      } else if (type === 'loss') {\n        if (sign === cell) {\n          reward = lossReward;\n        } else if (cell.length === 0) {\n          reward = basicReward;\n        } else {\n          reward = worstReward;\n        }\n      }\n\n      return reward;\n    },\n\n    async modelFit({ model, sign }) {\n      if (this.trainingCount[sign] > 0) {\n        // Где то данные не кладутся, но счётчик увеличивается.\n        if (this.training[sign].inputs.length === 0 || this.training[sign].labels.length === 0) {\n          return;\n        }\n\n        this.trainingCount[sign] = 0;\n        this.victoriesStatus[sign] = false;\n\n        await model.fit(\n          tf.tensor2d(this.training[sign].inputs),\n          tf.tensor2d(this.training[sign].labels),\n        );\n\n        this.trainingReset(sign);\n\n        this.agentsSetting({ sign: 'X' });\n        this.agentsSetting({ sign: 'O' });\n      }\n    },\n\n    trainingReset(sign) {\n      this.training[sign].inputs = [];\n      this.training[sign].labels = [];\n    },\n\n    async setHumanSign(humanCellIndex) {\n      if (!this.AIvsHuman.isDuel) {\n        this.AIvsHuman.isDuel = true;\n\n        this.trainingReset('X');\n        this.trainingReset('O');\n      }\n\n      const { isPass } = await this.humanSignXO({ sign: 'X', cIndex: humanCellIndex });\n\n      if (isPass) {\n        await this.humanSignXO({ sign: 'O', cIndex: -1 });\n      }\n    },\n\n    async humanSignXO({ sign, cIndex }) {\n      if (this.AIvsHuman.step > this.fieldSize) {\n        this.AIvsHumanReset();\n        return { isPass: false };\n      }\n\n      this.AIvsHuman.step += 1;\n      const stepInput = this.getStepInput(this.AIvsHuman.step);\n\n      const { field } = this.AIvsHuman;\n      let cellIndex = cIndex;\n\n      if (sign === 'O') {\n        this.increasingInterest({ field, agent: this.AIvsHuman });\n\n        const predictions = await this.modelO.predict(tf.tensor2d([this.AIvsHuman.rewards.concat([stepInput])])).data();\n        cellIndex = predictions.indexOf(Math.max(...predictions));\n      }\n\n      if (field[cellIndex].length === 0) {\n        field.splice(cellIndex, 1, sign);\n\n        this.AIvsHuman.rewards = this.recalculateRewards({ rewards: this.AIvsHuman.rewards, field });\n        const isWinnerXO = this.determineWinner({ field, sign });\n\n        if (isWinnerXO) {\n          const agent = { sign, rewards: this.AIvsHuman.rewards };\n          this.saveTraining({ type: 'winner', field, agent, stepInput });\n\n          this.AIvsHuman.victories[sign] += 1;\n          await this.AIvsHumanFit();\n\n          return { isPass: false };\n        }\n\n        // Даст выход -> return { isPass: true };\n      } else {\n        this.AIvsHuman.rewards = this.recalculateRewards({ rewards: this.AIvsHuman.rewards, field });\n        const agent = { sign, rewards: this.AIvsHuman.rewards };\n        this.saveTraining({ type: 'loss', field, agent, stepInput });\n\n        this.AIvsHuman.victories[sign] -= 1;\n        await this.AIvsHumanFit();\n\n        return { isPass: false };\n      }\n\n      return { isPass: true };\n    },\n\n    async AIvsHumanFit() {\n      await Promise.all([\n        this.modelFit({ model: this.modelX, sign: 'X' }),\n        this.modelFit({ model: this.modelO, sign: 'O' }),\n      ]);\n\n      this.AIvsHumanReset();\n    },\n\n    AIvsHumanReset() {\n      this.AIvsHuman = {\n        ...this.AIvsHuman,\n        isDuel: false,\n        step: 1,\n        rewards: [\n          0.1, 0.1, 0.1,\n          0.1, 0.1, 0.1,\n          0.1, 0.1, 0.1,\n        ],\n        field: [\n          '', '', '',\n          '', '', '',\n          '', '', '',\n        ],\n      };\n    },\n\n    async saveModelsOnPC() {\n      try {\n        await Promise.all([\n          this.modelX.save('downloads://syntet_TicTacToe_model_X'),\n          this.modelO.save('downloads://syntet_TicTacToe_model_O'),\n        ]);\n      } catch (err) {\n        console.error('saveModels', err);\n      }\n    },\n\n    localStorageClear() {\n      localStorage.clear();\n    },\n\n    async restoreModelsFromGitHub() {\n      const uriModelX = './models/syntet_TicTacToe_model_X.json';\n      const uriModelO = './models/syntet_TicTacToe_model_O.json';\n\n      const [modelX, modelO] = await Promise.all([\n        tf.loadLayersModel(uriModelX),\n        tf.loadLayersModel(uriModelO),\n      ]);\n\n      modelX.compile({\n        optimizer: 'adam',\n        loss: 'meanSquaredError',\n      });\n\n      modelO.compile({\n        optimizer: 'adam',\n        loss: 'meanSquaredError',\n      });\n\n      this.modelX = modelX;\n      this.modelO = modelO;\n    },\n  },\n};\n</script>\n\n<style\n  lang=\"scss\"\n  scoped\n>\n.TicTacToe {\n  --quantity-rows: 3;\n  --quantity-columns: 3;\n  --square-size: 64px;\n\n  position: relative;\n  margin-top: 30px;\n  user-select: none;\n}\n\n.stat {\n  text-align: center;\n  color: white;\n\n  .title {\n    font-size: 16px;\n    font-weight: bold;\n    color: darkgray;\n\n    .X {\n      color: #c94c4c;\n    }\n\n    .O {\n      color: #034f84;\n    }\n\n    .victory {\n    }\n  }\n\n  .description {\n    font-size: 14px;\n    color: gray;\n  }\n\n  .timer {\n    font-size: 12px;\n    color: dimgray;\n  }\n}\n\n.fields-container {\n  margin-top: 20px;\n  display: flex;\n  justify-content: center;\n}\n\n.fields {\n  position: relative;\n  display: flex;\n\n  .field {\n    margin: 5px;\n    display: grid;\n    grid-template-rows: repeat(var(--quantity-rows), var(--square-size));\n    grid-template-columns: repeat(var(--quantity-columns), var(--square-size));\n    grid-gap: 1px;\n\n    .cell {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      font-size: 30px;\n      color: #999;\n      background-color: #444;\n\n      &.victory {\n        background-color: darkgoldenrod;\n      }\n    }\n\n    .caption {\n      position: absolute;\n      bottom: -20px;\n      width: 50%;\n      text-align: center;\n      font-size: 14px;\n      color: dimgray;\n    }\n  }\n}\n\n.duel-field {\n  position: relative;\n  margin: 5px;\n  display: grid;\n  grid-template-rows: repeat(var(--quantity-rows), var(--square-size));\n  grid-template-columns: repeat(var(--quantity-columns), var(--square-size));\n  grid-gap: 1px;\n\n  .cell {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 30px;\n    font-weight: bold;\n    color: white;\n    background-color: #222;\n\n    &.X {\n      color: #c94c4c;\n    }\n\n    &.O {\n      color: #034f84;\n    }\n\n    &.victory {\n      background-color: gold;\n    }\n  }\n\n  .caption {\n    position: absolute;\n    bottom: -25px;\n    width: 100%;\n    text-align: center;\n    font-size: 14px;\n    color: dimgray;\n  }\n}\n\n.fields-description {\n  margin-top: 45px;\n  text-align: center;\n  line-height: 1;\n  font-size: 14px;\n  color: dimgray;\n}\n\n.ai-vs-human-container {\n  margin-top: 40px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  .result {\n    margin-top: 5px;\n    text-align: center;\n    font-size: 18px;\n    font-weight: bold;\n    color: gray;\n\n    .X {\n      color: #c94c4c;\n    }\n\n    .O {\n      color: #034f84;\n    }\n\n    .success {\n      color: green;\n    }\n\n    .loss {\n      color: red;\n    }\n  }\n\n  .caption {\n    text-align: center;\n    font-size: 14px;\n    font-weight: bold;\n    color: gray;\n  }\n\n  .field {\n    margin-top: 10px;\n    display: grid;\n    grid-template-rows: repeat(var(--quantity-rows), var(--square-size));\n    grid-template-columns: repeat(var(--quantity-columns), var(--square-size));\n    grid-gap: 1px;\n\n    .cell {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      font-size: 30px;\n      font-weight: bold;\n      color: white;\n      background-color: #222;\n\n      &.X {\n        color: #c94c4c;\n      }\n\n      &.O {\n        color: #034f84;\n      }\n    }\n  }\n\n  .resume {\n    margin-top: 10px;\n    color: #333;\n\n    &.is-duel {\n      color: white;\n    }\n  }\n\n  .models-controller {\n    margin-top: 10px;\n    text-align: center;\n\n    .button-container {\n      margin-top: 5px;\n    }\n  }\n}\n\n.button {\n  padding: 4px 6px;\n  border: none;\n  text-align: center;\n  color: darkgrey;\n  background-color: #222;\n  outline: none;\n}\n</style>\n","<template>\n  <div\n    ref=\"root\"\n    class=\"Bird\"\n    tabindex=\"0\"\n    @keydown.up=\"agentUp(agents[0])\"\n  >\n    <div class=\"field\">\n      <div\n        v-for=\"agent in agents\"\n        :key=\"agent.id\"\n        :style=\"{ transform: `translate(${agent.x}rem, ${-agent.y}rem)` }\"\n        :class=\"['agent', { intersected: agent.isIntersected }]\"\n      />\n\n      <div\n        v-for=\"wall in walls\"\n        :key=\"wall.id\"\n        :style=\"{ transform: `translate(${wall.x}rem, ${-wall.y}rem)` }\"\n        class=\"wall\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as tf from '@tensorflow/tfjs';\nimport TWEEN from '@tweenjs/tween.js';\n\nlet rafId;\n\n// С учётом размеров агента.\nconst fieldSize = 18;\n// 2 - ширина агента.\nconst maximumDistanceToIntersection = fieldSize - 2;\n\nexport default {\n  name: 'Bird',\n\n  data() {\n    return {\n      model: tf.sequential(),\n      // Очищаемые перед следующим поколением накопленные данные агентов для обучения.\n      training: {\n        inputs: [],\n        labels: [],\n      },\n      // Лучшие агенты в поколении из training набора на которых будет обучаться модель.\n      learning: {\n        inputs: [],\n        labels: [],\n      },\n      // todo хранить saveLearning в агенте, а при обучении брать 5 самых долго живущих.\n      // todo добавить параметр долгоживущего. занести его в сеть для обучения?\n      agents: [\n        {\n          id: `agents_${1}`,\n          x: 0,\n          y: 0,\n          width: 2,\n          height: 2,\n          distance: maximumDistanceToIntersection,\n          isIntersected: false,\n          heightUp: { y: 18 },\n          heightDown: { y: 0 },\n          flightTime: 300,\n          tween: { stop() {} },\n        },\n      ],\n      walls: [\n        {\n          id: `walls_${1}`,\n          x: 20,\n          y: 0,\n          width: 2,\n          height: 4,\n          movementTime: 2000,\n          from: {\n            x: 20,\n          },\n          to: {\n            x: -2,\n          },\n          tween: { stop() {} },\n        },\n        {\n          id: `walls_${2}`,\n          x: 30,\n          y: 16,\n          width: 2,\n          height: 4,\n          movementTime: 3000,\n          from: {\n            x: 30,\n          },\n          to: {\n            x: -2,\n          },\n        },\n        // {\n        //   id: `walls_${3}`,\n        //   x: 18 * 1.7,\n        //   y: 0,\n        //   width: 2,\n        //   height: 4,\n        //   movementTime: 1000 * 1.7,\n        //   from: {\n        //     x: 18 * 1.7,\n        //   },\n        //   to: {\n        //     x: -2,\n        //   },\n        // },\n      ],\n    };\n  },\n\n  async mounted() {\n    this.setupModel();\n    this.agentSetting();\n    rafId = requestAnimationFrame(this.gameLoop);\n\n    await this.modelPredict();\n    this.restartWallsMovement();\n\n    // window.check = () => {\n    //   const [wall] = this.walls;\n    //   this.hasWallIntersectionWithAgent(wall);\n    // };\n  },\n\n  destroyed() {\n    cancelAnimationFrame(rafId);\n  },\n\n  methods: {\n    setupModel() {\n      this.model.add(tf.layers.dense({\n        inputShape: [2],\n        activation: 'sigmoid',\n        units: 64,\n      }));\n\n      // this.model.add(tf.layers.dropout({\n      //   rate: 0.1,\n      // }));\n      //\n      // this.model.add(tf.layers.dense({\n      //   activation: 'sigmoid',\n      //   units: 128,\n      // }));\n\n      this.model.add(tf.layers.dense({\n        activation: 'sigmoid',\n        units: 1,\n      }));\n\n      this.model.compile({\n        optimizer: tf.train.adamax(0.01),\n        loss: 'meanSquaredError',\n        metrics: ['accuracy'],\n      });\n    },\n\n    // todo настройка по первому объекту - все одинаковые.\n    agentSetting() {\n      const [agent] = this.agents;\n      const [wall] = this.walls;\n\n      this.$refs.root.style.setProperty('--agent-width', `${agent.width}rem`);\n      this.$refs.root.style.setProperty('--agent-height', `${agent.height}rem`);\n\n      this.$refs.root.style.setProperty('--wall-width', `${wall.width}rem`);\n      this.$refs.root.style.setProperty('--wall-height', `${wall.height}rem`);\n    },\n\n    gameLoop(time) {\n      rafId = requestAnimationFrame(this.gameLoop);\n      TWEEN.update(time);\n    },\n\n    async modelPredict() {\n      await Promise.all(this.agents.map(this.predict));\n      // todo вместо цикла, добавить счетчик агентов в строю и сбрасывать после обучения сети.\n      const countNotIntersected = this.agents.filter((agent) => !agent.isIntersected).length;\n\n      if (countNotIntersected === 0) {\n        this.agentsReset();\n        this.stopWallsMovement();\n        await this.modelFit();\n        this.restartWallsMovement();\n      }\n\n      // Замедлялка прогнозирования.\n      await new Promise((resolve) => setTimeout(resolve, 500));\n      this.modelPredict();\n    },\n\n    async predict(agent) {\n      if (!agent.isIntersected) {\n        const [prediction] = await this.model.predict(tf.tensor2d([\n          [\n            agent.y / fieldSize,\n            agent.distance / fieldSize,\n          ],\n        ])).data();\n\n        console.log('prediction', prediction);\n\n        if (prediction > 0.5) {\n          this.agentUp(agent);\n        }\n      }\n    },\n\n    agentUp(agent) {\n      agent.tween.stop();\n\n      agent.tween = new TWEEN.Tween(agent)\n        .to(agent.heightUp, agent.flightTime)\n        .easing(TWEEN.Easing.Quadratic.Out)\n        .onComplete(() => this.agentDown(agent))\n        .start();\n    },\n\n    agentDown(agent) {\n      agent.tween = new TWEEN.Tween(agent)\n        .to(agent.heightDown, agent.flightTime)\n        .easing(TWEEN.Easing.Quadratic.In)\n        .onComplete(() => this.agentFell(agent))\n        .start();\n    },\n\n    // todo сброс состояния, когда все агенты потерпели неудачу.\n    agentFell(agent) {\n      console.log('agentFell', agent);\n    },\n\n    // todo множественные агенты\n    agentsReset() {\n      const [agent] = this.agents;\n\n      agent.tween.stop();\n\n      agent.y = 0;\n      agent.distance = maximumDistanceToIntersection;\n      agent.isIntersected = false;\n    },\n\n    stopWallsMovement() {\n      this.walls.forEach((wall) => wall.tween.stop());\n    },\n\n    restartWallsMovement() {\n      this.walls.forEach(this.rerunWallMovement);\n    },\n\n    rerunWallMovement(wall) {\n      wall.x = wall.from.x;\n\n      wall.tween = new TWEEN.Tween(wall)\n        .to(wall.to, wall.movementTime)\n        .onUpdate(() => this.hasWallIntersectionWithAgent(wall))\n        .onComplete(() => this.rerunWallMovement(wall))\n        .start();\n    },\n\n    // todo множественные агенты\n    hasWallIntersectionWithAgent(wall) {\n      const [agent] = this.agents;\n\n      if (!agent.isIntersected) {\n        const isTopBorderAgent = agent.y + agent.height > wall.y;\n        const isRightBorderAgent = agent.x + agent.width > wall.x;\n        const isBottomBorderAgent = agent.y < wall.y + wall.height;\n\n        if (wall.x - agent.width >= 0) {\n          const distance = wall.x - agent.width;\n\n          if (distance < agent.distance) {\n            agent.distance = distance;\n          }\n        }\n\n        if (\n          isTopBorderAgent\n          && isRightBorderAgent\n          && isBottomBorderAgent\n        ) {\n          agent.isIntersected = true;\n\n          // todo сохраняется очень много информации. 60fps.\n          this.saveLearning({\n            input: [\n              agent.y / fieldSize,\n              agent.distance / fieldSize,\n            ],\n            label: [0],\n          });\n        } else {\n          this.saveLearning({\n            input: [\n              agent.y / fieldSize,\n              agent.distance / fieldSize,\n            ],\n            label: [1],\n          });\n        }\n      }\n    },\n\n    // todo training\n    saveLearning({ input, label }) {\n      // console.log('input', input);\n      // console.log('label', label);\n\n      this.learning.inputs.push(input);\n      this.learning.labels.push(label);\n    },\n\n    // todo training и отбор лучших в поколении?\n    async modelFit() {\n      await this.model.fit(\n        tf.tensor2d(this.learning.inputs),\n        tf.tensor2d(this.learning.labels),\n      );\n    },\n  },\n};\n</script>\n\n<style scoped>\n.Bird {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  outline: none;\n\n  --agent-width: -1rem;\n  --agent-height: -1rem;\n\n  --wall-width: -1rem;\n  --wall-height: -1rem;\n}\n\n.field {\n  position: relative;\n  width: 20rem;\n  height: 20rem;\n  background-color: #222;\n  overflow: hidden;\n}\n\n/* todo ширина высота из js */\n.agent {\n  position: absolute;\n  bottom: 0;\n  width: var(--agent-width);\n  height: var(--agent-height);\n  background-color: forestgreen;\n  will-change: transform;\n}\n\n.agent.intersected {\n  background-color: yellowgreen;\n}\n\n.wall {\n  position: absolute;\n  bottom: 0;\n  width: var(--wall-width);\n  height: var(--wall-height);\n  background-color: brown;\n  will-change: transform;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./TicTacToe.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./TicTacToe.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TicTacToe.vue?vue&type=template&id=2776d3bd&scoped=true&\"\nimport script from \"./TicTacToe.vue?vue&type=script&lang=js&\"\nexport * from \"./TicTacToe.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TicTacToe.vue?vue&type=style&index=0&id=2776d3bd&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2776d3bd\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"stat\"},[_vm._v(\" Живых: \"+_vm._s(_vm.alives)+\" | Поколений: \"+_vm._s(_vm.generation)+\" | Победы: \"+_vm._s(_vm.victories)+\" \")]),_c('div',{ref:\"container\",staticClass:\"container\",attrs:{\"tabindex\":\"0\"},on:{\"keyup\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"up\",38,$event.key,[\"Up\",\"ArrowUp\"])){ return null; }return _vm.handleJumpTop($event)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"right\",39,$event.key,[\"Right\",\"ArrowRight\"])){ return null; }if('button' in $event && $event.button !== 2){ return null; }return _vm.handleJumpRight($event)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"down\",40,$event.key,[\"Down\",\"ArrowDown\"])){ return null; }return _vm.handleJumpBottom($event)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }return _vm.handleJumpLeft($event)}]}},[_c('div',{staticClass:\"field cells\"},_vm._l((_vm.field),function(cellValue,index){return _c('div',{key:index,class:['cell', { available: cellValue !== 0 }]},[(cellValue === 1)?_c('div',{staticClass:\"starting-checkpoint\"},[_vm._v(\" 🥾 \")]):_vm._e(),(cellValue === _vm.investigatedMaximumCellValue\n            || _vm.investigatedMaximumCellValue === _vm.maximumCellValue)?_c('div',{staticClass:\"maximum-cell-value-checkpoint\"},[_vm._v(\" 🤘 \")]):_vm._e(),(cellValue === _vm.maximumCellValue)?_c('div',{staticClass:\"finishing-checkpoint\"},[_vm._v(\" 🧠 \")]):_vm._e()])}),0),(_vm.isDisplayingActors)?_c('div',{staticClass:\"field actors\"},_vm._l((_vm.actors),function(actor){return _c('div',{key:actor.id,style:({\n          gridRow: actor.y,\n          gridColumn: actor.x,\n        })},[_c('div',{ref:(\"actors_\" + (actor.id)),refInFor:true,staticClass:\"actor\"},[_c('div',[_vm._v(\"👣️\")])])])}),0):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"stat\">\n      Живых: {{ alives }} | Поколений: {{ generation }} | Победы: {{ victories }}\n    </div>\n\n    <div\n      ref=\"container\"\n      class=\"container\"\n      tabindex=\"0\"\n      @keyup.up=\"handleJumpTop\"\n      @keyup.right=\"handleJumpRight\"\n      @keyup.down=\"handleJumpBottom\"\n      @keyup.left=\"handleJumpLeft\"\n    >\n      <div class=\"field cells\">\n        <div\n          v-for=\"(cellValue, index) in field\"\n          :key=\"index\"\n          :class=\"['cell', { available: cellValue !== 0 }]\"\n        >\n          <div\n            v-if=\"cellValue === 1\"\n            class=\"starting-checkpoint\"\n          >\n            🥾\n          </div>\n\n          <div\n            v-if=\"cellValue === investigatedMaximumCellValue\n              || investigatedMaximumCellValue === maximumCellValue\"\n            class=\"maximum-cell-value-checkpoint\"\n          >\n            🤘\n          </div>\n\n          <div\n            v-if=\"cellValue === maximumCellValue\"\n            class=\"finishing-checkpoint\"\n          >\n            🧠\n          </div>\n        </div>\n      </div>\n\n      <div\n        v-if=\"isDisplayingActors\"\n        class=\"field actors\"\n      >\n        <div\n          v-for=\"actor in actors\"\n          :key=\"actor.id\"\n          :style=\"{\n            gridRow: actor.y,\n            gridColumn: actor.x,\n          }\"\n        >\n          <div\n            :ref=\"`actors_${actor.id}`\"\n            class=\"actor\"\n          >\n            <div>👣️</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as tf from '@tensorflow/tfjs';\n\nconst isAutomaticControl = true;\nconst isDisplayingActors = true;\n\nconst actorsCount = 500;\nconst researchActors = 5;\nconst everyNWillResearcher = actorsCount / researchActors;\nlet everyNWillResearcherCounter = 0;\n\n/* eslint-disable no-plusplus */\nexport default {\n  name: 'Square',\n\n  data() {\n    return {\n      model: tf.sequential(),\n      // Очищаемые перед следующим поколением накопленные данные агентов для обучения.\n      training: {\n        inputs: [],\n        labels: [],\n      },\n      // Лучшие агенты в поколении из training набора на которых будет обучаться модель.\n      learning: {\n        // x, y - Координаты актёра.\n        // cellValue - Значение ячейки, до которой агент дошёл.\n        inputs: [],\n        // [1, 0, 0, 0] - Пойти на север (north).\n        // [0, 1, 0, 0] - Пойти на восток (east).\n        // [0, 0, 1, 0] - Пойти на юг (south).\n        // [0, 0, 0, 1] - Пойти на запад (west).\n        labels: [],\n      },\n      generation: 0,\n      victories: 0,\n\n      isDisplayingActors,\n      // Набор генерируемых актёров.\n      actors: [],\n      // Количество актёров оставшихся в живых.\n      alives: actorsCount,\n      // Максимальное значение пройденной ячейки.\n      investigatedMaximumCellValue: 1,\n\n      // Игровая область обязательно квадратной формы под Math.sqrt.\n      // Обязательно между доступным путём, должно быть 2 запретных ячейки\n      // из за исследовательских \"усиков\".\n      // 0 - Запретная территория.\n      // [1..N) - Проходная территория.\n      // N - Финишная точка.\n      // @formatter:off\n      /* eslint-disable no-multi-spaces */\n      field: [\n        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,\n        0,  1,  0,  0,  0,  0,  0,  0,  0, 45, 44, 43,  0,\n        0,  2,  0,  0,  0,  0,  0,  0,  0,  0,  0, 42,  0,\n        0,  3,  0,  0,  8,  9, 10, 11,  0,  0,  0, 41,  0,\n        0,  4,  5,  6,  7,  0,  0, 12,  0,  0,  0, 40,  0,\n        0,  0,  0,  0,  0,  0,  0, 13,  0,  0,  0, 39,  0,\n        0,  0,  0,  0,  0,  0, 15, 14,  0,  0,  0, 38,  0,\n        0,  0,  0,  0,  0,  0, 16,  0,  0,  0,  0, 37,  0,\n        0,  0, 21, 20, 19, 18, 17,  0,  0,  0,  0, 36,  0,\n        0,  0, 22,  0,  0,  0,  0,  0,  0, 33, 34, 35,  0,\n        0,  0, 23,  0,  0,  0,  0,  0,  0, 32,  0,  0,  0,\n        0,  0, 24, 25, 26, 27, 28, 29, 30, 31,  0,  0,  0,\n        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,\n      ],\n      // @formatter:on\n      /* eslint-enable no-multi-spaces */\n      fieldSize: -1,\n      maximumCellValue: -1,\n    };\n  },\n\n  async mounted() {\n    this.setupModel();\n\n    this.fieldSetting();\n    await this.actorsSetting();\n\n    if (isAutomaticControl) {\n      await this.modelPredict();\n    }\n  },\n\n  methods: {\n    setupModel() {\n      this.model.add(tf.layers.dense({\n        // Описание в learning.inputs.\n        inputShape: [3],\n        activation: 'sigmoid',\n        units: 256,\n      }));\n\n      this.model.add(tf.layers.dropout({\n        rate: 0.1,\n      }));\n\n      this.model.add(tf.layers.dense({\n        activation: 'sigmoid',\n        units: 128,\n      }));\n\n      // this.model.add(tf.layers.dropout({\n      //   rate: 0.1,\n      // }));\n      //\n      // this.model.add(tf.layers.dense({\n      //   activation: 'sigmoid',\n      //   units: 32,\n      // }));\n\n      this.model.add(tf.layers.dense({\n        activation: 'sigmoid',\n        // [north, east, south, west] - Прогноз стороны для передвижения.\n        units: 4,\n      }));\n\n      this.model.compile({\n        optimizer: tf.train.adam(0.01),\n        loss: 'meanSquaredError',\n        metrics: ['accuracy'],\n      });\n    },\n\n    fieldSetting() {\n      this.fieldSize = Math.sqrt(this.field.length);\n      this.maximumCellValue = Math.max(...this.field);\n\n      this.$refs.container.style.setProperty('--quantity-rows', this.fieldSize);\n      this.$refs.container.style.setProperty('--quantity-columns', this.fieldSize);\n    },\n\n    async actorsSetting() {\n      for (let i = 0; i < actorsCount; i++) {\n        this.actors.push({\n          id: i,\n          style: undefined,\n\n          // Сбрасываемые.\n          x: 2,\n          y: 2,\n          cellValue: 1,\n        });\n      }\n\n      if (isDisplayingActors) {\n        await this.$nextTick();\n\n        this.actors.forEach((actor) => {\n          const [{ style }] = this.$refs[`actors_${actor.id}`];\n          actor.style = style;\n        });\n      }\n    },\n\n    actorsReset() {\n      for (let i = 0; i < actorsCount; i++) {\n        this.actors[i].x = 2;\n        this.actors[i].y = 2;\n        this.actors[i].cellValue = 1;\n      }\n\n      this.alives = actorsCount;\n    },\n\n    async modelPredict() {\n      await Promise.all(this.actors.map(async (actor) => {\n        if (actor.cellValue !== 0) {\n          let prediction;\n          everyNWillResearcherCounter += 1;\n\n          if (everyNWillResearcherCounter === everyNWillResearcher) {\n            prediction = this.getRandomPredict();\n            everyNWillResearcherCounter = 0;\n          } else {\n            prediction = await this.model.predict(tf.tensor2d([\n              [\n                actor.x / this.fieldSize,\n                actor.y / this.fieldSize,\n                actor.cellValue / this.maximumCellValue,\n              ],\n            ])).data();\n\n            // console.log(\n            //   'Top', prediction[0].toFixed(10),\n            //   'Right', prediction[1].toFixed(10),\n            //   'Bottom', prediction[2].toFixed(10),\n            //   'Left', prediction[3].toFixed(10),\n            // );\n          }\n\n          const directionStep = this.getDirectionStep(prediction);\n          this[directionStep](actor);\n\n          await this.availabilityCheck(actor);\n        }\n\n        // Замедление прогноза для каждого актёра.\n        // await new Promise((resolve) => {\n        //   setTimeout(() => {\n        //     resolve();\n        //   }, 1000);\n        // });\n      }));\n\n      await this.modelPredict();\n    },\n\n    // Создание случайных решений для исследователей.\n    getRandomPredict() {\n      return [\n        Math.random(), // jumpTop\n        Math.random(), // jumpRight\n        Math.random(), // jumpBottom\n        Math.random(), // jumpLeft\n      ];\n    },\n\n    getDirectionStep([jumpTop, jumpRight, jumpBottom, jumpLeft]) {\n      let maximum = jumpTop;\n      let action = 'jumpTop';\n\n      if (jumpRight > maximum) {\n        maximum = jumpRight;\n        action = 'jumpRight';\n      }\n\n      if (jumpBottom > maximum) {\n        maximum = jumpBottom;\n        action = 'jumpBottom';\n      }\n\n      if (jumpLeft > maximum) {\n        // maximum = jumpLeft;\n        action = 'jumpLeft';\n      }\n\n      return action;\n    },\n\n    jumpTop(actor) {\n      actor.y -= 1;\n    },\n\n    jumpRight(actor) {\n      actor.x += 1;\n    },\n\n    jumpBottom(actor) {\n      actor.y += 1;\n    },\n\n    jumpLeft(actor) {\n      actor.x -= 1;\n    },\n\n    async availabilityCheck(actor) {\n      // Смещение на -1: Сетка начинается с 1, а значения в массиве начинаются с 0.\n      const normalY = actor.y - 1;\n      const normalX = actor.x - 1;\n      const cellValue = this.field[normalY * this.fieldSize + normalX];\n\n      // Предотвращение зацикливания. Актёр не должен двигаться в обратном направлении.\n      if (cellValue > actor.cellValue) {\n        actor.cellValue = cellValue;\n\n        if (cellValue > this.investigatedMaximumCellValue) {\n          this.investigatedMaximumCellValue = cellValue;\n        }\n\n        if (cellValue === this.maximumCellValue) {\n          this.victories += 1;\n          await this.actorsReset();\n          return;\n        }\n      } else {\n        actor.cellValue = 0;\n        this.alives -= 1;\n      }\n\n      this.saveTraining({ actor, label: this.getAntennaCellValues({ normalX, normalY }) });\n\n      if (this.alives === 0) {\n        await this.modelFit();\n      }\n    },\n\n    // Получение значения ячейки, чем дальше ячейка от старта, тем больше там значение.\n    getAntennaCellValues({ normalX, normalY }) {\n      // 0 - когда выходит за пределы поля (дальше пути нет).\n      const topCellValue = this.field[(normalY - 1) * this.fieldSize + normalX] || 0;\n      const rightCellValue = this.field[normalY * this.fieldSize + (normalX + 1)] || 0;\n      const bottomCellValue = this.field[(normalY + 1) * this.fieldSize + normalX] || 0;\n      const leftCellValue = this.field[normalY * this.fieldSize + (normalX - 1)] || 0;\n\n      return [\n        topCellValue / this.maximumCellValue,\n        rightCellValue / this.maximumCellValue,\n        bottomCellValue / this.maximumCellValue,\n        leftCellValue / this.maximumCellValue,\n      ];\n    },\n\n    saveTraining({ actor, label }) {\n      this.training.inputs.push([\n        actor.x / this.fieldSize,\n        actor.y / this.fieldSize,\n        actor.cellValue / this.maximumCellValue,\n      ]);\n\n      this.training.labels.push(label);\n    },\n\n    async modelFit() {\n      const {\n        firstInput,\n        firstLabel,\n\n        secondInput,\n        secondLabel,\n\n        thirdInput,\n        thirdLabel,\n\n        fourInput,\n        fourLabel,\n\n        fiveInput,\n        fiveLabel,\n      } = this.getBestMoves();\n\n      this.learning.inputs.push(\n        firstInput,\n        secondInput,\n        thirdInput,\n        fourInput,\n        fiveInput,\n      );\n\n      this.learning.labels.push(\n        firstLabel,\n        secondLabel,\n        thirdLabel,\n        fourLabel,\n        fiveLabel,\n      );\n\n      await this.model.fit(\n        tf.tensor2d(this.learning.inputs),\n        tf.tensor2d(this.learning.labels),\n      );\n\n      this.generation += 1;\n      await this.actorsReset();\n    },\n\n    getBestMoves() {\n      const { inputs, labels } = this.training;\n      this.training = { inputs: [], labels: [] };\n\n      let fiveCellValue = -1;\n      let fourCellValue = -1;\n      let thirdCellValue = -1;\n      let secondCellValue = -1;\n      let firstCellValue = -1;\n\n      let fiveIndex = -1;\n      let fourIndex = -1;\n      let thirdIndex = -1;\n      let secondIndex = -1;\n      let firstIndex = -1;\n\n      /* eslint-disable vue/script-indent */\n      inputs.forEach(([, , cellValue], index) => {\n        switch (true) {\n          case cellValue > firstCellValue:\n            fiveCellValue = fourCellValue;\n            fourCellValue = thirdCellValue;\n            thirdCellValue = secondCellValue;\n            secondCellValue = firstCellValue;\n            firstCellValue = cellValue;\n\n            fiveIndex = fourIndex;\n            fourIndex = thirdIndex;\n            thirdIndex = secondIndex;\n            secondIndex = firstIndex;\n            firstIndex = index;\n            break;\n\n          case cellValue > secondCellValue:\n            fiveCellValue = fourCellValue;\n            fourCellValue = thirdCellValue;\n            thirdCellValue = secondCellValue;\n            secondCellValue = cellValue;\n\n            fiveIndex = fourIndex;\n            fourIndex = thirdIndex;\n            thirdIndex = secondIndex;\n            secondIndex = index;\n            break;\n\n          case cellValue > thirdCellValue:\n            fiveCellValue = fourCellValue;\n            fourCellValue = thirdCellValue;\n            thirdCellValue = cellValue;\n\n            fiveIndex = fourIndex;\n            fourIndex = thirdIndex;\n            thirdIndex = index;\n            break;\n\n          case cellValue > fourCellValue:\n            fiveCellValue = fourCellValue;\n            fourCellValue = cellValue;\n\n            fiveIndex = fourIndex;\n            fourIndex = index;\n            break;\n\n          case cellValue > fiveCellValue:\n            fiveCellValue = cellValue;\n\n            fiveIndex = index;\n            break;\n\n          default:\n        }\n      });\n\n      return {\n        firstInput: inputs[firstIndex],\n        firstLabel: labels[firstIndex],\n\n        secondInput: inputs[secondIndex],\n        secondLabel: labels[secondIndex],\n\n        thirdInput: inputs[thirdIndex],\n        thirdLabel: labels[thirdIndex],\n\n        fourInput: inputs[fourIndex],\n        fourLabel: labels[fourIndex],\n\n        fiveInput: inputs[fiveIndex],\n        fiveLabel: labels[fiveIndex],\n      };\n    },\n\n    // Специально для ручного управления.\n    async handleJumpTop() {\n      const [actor] = this.actors;\n\n      this.jumpTop(actor);\n      await this.availabilityCheck(actor);\n    },\n\n    async handleJumpRight() {\n      const [actor] = this.actors;\n\n      this.jumpRight(actor);\n      await this.availabilityCheck(actor);\n    },\n\n    async handleJumpBottom() {\n      const [actor] = this.actors;\n\n      this.jumpBottom(actor);\n      await this.availabilityCheck(actor);\n    },\n\n    async handleJumpLeft() {\n      const [actor] = this.actors;\n\n      this.jumpLeft(actor);\n      await this.availabilityCheck(actor);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.stat {\n  position: absolute;\n  margin-top: 1rem;\n  width: 100%;\n  text-align: center;\n  font-size: 1.2rem;\n  color: white;\n}\n\n.container {\n  --quantity-rows: -1;\n  --quantity-columns: -1;\n  --square-size: 3rem;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  outline: none;\n  user-select: none;\n}\n\n.field {\n  display: grid;\n  grid-template-rows: repeat(var(--quantity-rows), var(--square-size));\n  grid-template-columns: repeat(var(--quantity-columns), var(--square-size));\n  grid-gap: 0.5rem;\n}\n\n.cells {\n}\n\n.cell {\n  position: relative;\n  background-color: #222;\n}\n\n.available {\n  background-color: darkcyan;\n}\n\n.starting-checkpoint,\n.maximum-cell-value-checkpoint,\n.finishing-checkpoint {\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  font-size: 2rem;\n  background-color: seagreen;\n  outline: 0.5rem dashed seagreen;\n}\n\n.maximum-cell-value-checkpoint {\n  background-color: brown;\n  outline: 0.5rem dashed brown;\n}\n\n.actors {\n  position: absolute;\n}\n\n.actor {\n  height: 100%;\n  text-align: center;\n  font-size: 2rem;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Square.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Square.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Square.vue?vue&type=template&id=1da70bd2&scoped=true&\"\nimport script from \"./Square.vue?vue&type=script&lang=js&\"\nexport * from \"./Square.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Square.vue?vue&type=style&index=0&id=1da70bd2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1da70bd2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"root\",staticClass:\"Bird\",attrs:{\"tabindex\":\"0\"},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"up\",38,$event.key,[\"Up\",\"ArrowUp\"])){ return null; }return _vm.agentUp(_vm.agents[0])}}},[_c('div',{staticClass:\"field\"},[_vm._l((_vm.agents),function(agent){return _c('div',{key:agent.id,class:['agent', { intersected: agent.isIntersected }],style:({ transform: (\"translate(\" + (agent.x) + \"rem, \" + (-agent.y) + \"rem)\") })})}),_vm._l((_vm.walls),function(wall){return _c('div',{key:wall.id,staticClass:\"wall\",style:({ transform: (\"translate(\" + (wall.x) + \"rem, \" + (-wall.y) + \"rem)\") })})})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bird.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bird.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Bird.vue?vue&type=template&id=c5ebb58e&scoped=true&\"\nimport script from \"./Bird.vue?vue&type=script&lang=js&\"\nexport * from \"./Bird.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Bird.vue?vue&type=style&index=0&id=c5ebb58e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c5ebb58e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"snake\",staticClass:\"Snake\",attrs:{\"tabindex\":\"-1\"},on:{\"keyup\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"up\",38,$event.key,[\"Up\",\"ArrowUp\"])){ return null; }return _vm.step('stepTop')},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"right\",39,$event.key,[\"Right\",\"ArrowRight\"])){ return null; }if('button' in $event && $event.button !== 2){ return null; }return _vm.step('stepRight')},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"down\",40,$event.key,[\"Down\",\"ArrowDown\"])){ return null; }return _vm.step('stepBottom')},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }return _vm.step('stepLeft')}]}},[_c('div',{staticClass:\"field\"},_vm._l((_vm.field),function(barrier,index){return _c('div',{key:index,staticClass:\"cell\",style:({ backgroundColor: barrier })},[_vm._v(\" \"+_vm._s(_vm.rewards[index])+\" \")])}),0),_c('div',{staticClass:\"actor\"},[_c('div',{staticClass:\"field\"},_vm._l((_vm.actor.cells),function(ref,index){\nvar position = ref.position;\nreturn _c('div',{key:index,staticClass:\"cell\",style:({\n          gridColumn: position.x,\n          gridRow: position.y,\n        })})}),0)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    ref=\"snake\"\n    tabindex=\"-1\"\n    class=\"Snake\"\n    @keyup.up=\"step('stepTop')\"\n    @keyup.right=\"step('stepRight')\"\n    @keyup.down=\"step('stepBottom')\"\n    @keyup.left=\"step('stepLeft')\"\n  >\n    <div class=\"field\">\n      <div\n        v-for=\"(barrier, index) in field\"\n        :key=\"index\"\n        :style=\"{ backgroundColor: barrier }\"\n        class=\"cell\"\n      >\n        {{ rewards[index] }}\n      </div>\n    </div>\n\n    <div class=\"actor\">\n      <div class=\"field\">\n        <div\n          v-for=\"({ position }, index) in actor.cells\"\n          :key=\"index\"\n          :style=\"{\n            gridColumn: position.x,\n            gridRow: position.y,\n          }\"\n          class=\"cell\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as tf from '@tensorflow/tfjs';\nimport cloneDeep from 'clone-deep';\n\nconst fieldSize = 10;\nconst cellEmpty = '';\nconst barrierSign = '#111';\nconst appleSign = 'brown';\n\nconst basicReward = 0.1;\nconst barrierReward = -1;\nconst appleReward = 1;\n\nexport default {\n  name: 'Snake',\n\n  data() {\n    return {\n      model: tf.sequential(),\n      training: { inputs: [], labels: [] },\n      rewards: Array(fieldSize ** 2).fill(basicReward),\n\n      field: Array(fieldSize ** 2).fill(cellEmpty),\n      fieldSize,\n\n      actor: {\n        cells: [\n          { position: { x: 3, y: 6 } },\n          { position: { x: 3, y: 7 } },\n          { position: { x: 3, y: 8 } },\n        ],\n        step: 1,\n      },\n      actorDefault: undefined,\n    };\n  },\n\n  mounted() {\n    this.actorDefault = cloneDeep(this.actor);\n\n    this.setupModel();\n\n    this.setStyle();\n    this.resetCells();\n    this.markCells();\n\n    // todo добавление яблока\n    this.field[45] = appleSign;\n    this.rewards[45] = appleReward;\n\n    // todo test\n    this.$forceUpdate();\n  },\n\n  methods: {\n    // todo\n    setupModel() {\n      this.model.add(tf.layers.dense({\n        inputShape: [this.fieldSize],\n        activation: 'sigmoid',\n        units: 64,\n      }));\n\n      // model.add(tf.layers.dense({\n      //   activation: 'sigmoid',\n      //   units: 24,\n      // }));\n\n      this.model.add(tf.layers.dense({\n        activation: 'sigmoid',\n        units: 4,\n      }));\n\n      this.model.compile({\n        optimizer: 'adam',\n        loss: 'meanSquaredError',\n      });\n    },\n\n    setStyle() {\n      this.$refs.snake.style.setProperty('--rows', String(fieldSize));\n      this.$refs.snake.style.setProperty('--columns', String(fieldSize));\n    },\n\n    resetCells() {\n      for (let x = 0; x < fieldSize; x += 1) {\n        for (let y = 0; y < fieldSize; y += 1) {\n          const cellIndex = y * fieldSize + x;\n\n          // Границы поля.\n          if (x === 0 || x === fieldSize - 1 || y === 0 || y === fieldSize - 1) {\n            this.field[cellIndex] = barrierSign;\n            this.rewards[cellIndex] = barrierReward;\n          } else {\n            this.field[cellIndex] = cellEmpty;\n            this.rewards[cellIndex] = basicReward;\n          }\n        }\n      }\n    },\n\n    markCells() {\n      this.actor.cells.forEach(({ position: { x, y } }) => {\n        const cellIndex = (y - 1) * fieldSize + (x - 1);\n\n        this.field[cellIndex] = barrierSign;\n        this.rewards[cellIndex] = barrierReward;\n      });\n    },\n\n    step(side) {\n      const { position: { x, y } } = this.actor.cells[this.actor.cells.length - 1];\n\n      this.stepTails();\n      this.resetTail({ x, y });\n      this.stepHead(side);\n\n      this.hasAvailability();\n    },\n\n    stepTails() {\n      for (let i = this.actor.cells.length - 1; i > 0; i -= 1) {\n        const cell = this.actor.cells[i];\n        cell.position = this.actor.cells[i - 1].position;\n\n        const { position: { x, y } } = cell;\n        const cellIndex = (y - 1) * fieldSize + (x - 1);\n\n        this.field[cellIndex] = barrierSign;\n        this.rewards[cellIndex] = barrierReward;\n      }\n    },\n\n    resetTail({ x, y }) {\n      const cellIndex = (y - 1) * fieldSize + (x - 1);\n\n      this.field[cellIndex] = cellEmpty;\n      this.rewards[cellIndex] = basicReward;\n    },\n\n    // todo помечать голову как занятую ячейку\n    stepHead(side) {\n      const [cell] = this.actor.cells;\n      this[side]({ cell, ...cell.position });\n    },\n\n    stepTop({ cell, x, y }) {\n      cell.position = { x, y: y - 1 };\n    },\n\n    stepRight({ cell, x, y }) {\n      cell.position = { x: x + 1, y };\n    },\n\n    stepBottom({ cell, x, y }) {\n      cell.position = { x, y: y + 1 };\n    },\n\n    stepLeft({ cell, x, y }) {\n      cell.position = { x: x - 1, y };\n    },\n\n    // todo после обновления в stepHead, может не правильно срабатывать?\n    hasAvailability() {\n      const [{ position: { x, y } }] = this.actor.cells;\n      const cellIndex = (y - 1) * fieldSize + (x - 1);\n\n      if (this.field[cellIndex] === barrierSign) {\n        this.resetGame();\n      }\n    },\n\n    resetGame() {\n      this.actor = cloneDeep(this.actorDefault);\n      this.resetCells();\n    },\n  },\n};\n</script>\n\n<style\n  lang=\"scss\"\n  scoped\n>\n.Snake {\n  --rows: -1;\n  --columns: -1;\n  --size: 25px;\n\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  user-select: none;\n  outline: none;\n}\n\n.field {\n  display: grid;\n  grid-template-rows: repeat(var(--rows), var(--size));\n  grid-template-columns: repeat(var(--columns), var(--size));\n  grid-gap: 1px;\n\n  .cell {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 10px;\n    color: #9acd32;\n    background-color: #444;\n  }\n}\n\n.actor {\n  position: absolute;\n\n  .cell {\n    /* todo */\n    /*background-color: #9acd32;*/\n    background-color: rgba(#9acd32, 0.4);\n  }\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Snake.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Snake.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Snake.vue?vue&type=template&id=dfc1b6ae&scoped=true&\"\nimport script from \"./Snake.vue?vue&type=script&lang=js&\"\nexport * from \"./Snake.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Snake.vue?vue&type=style&index=0&id=dfc1b6ae&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dfc1b6ae\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport VueRouter from 'vue-router';\n\nimport App from '@/App.vue';\nimport TicTacToe from '@/TicTacToe.vue';\nimport Square from '@/Square.vue';\nimport Bird from '@/Bird.vue';\nimport Snake from '@/Snake.vue';\n\nVue.use(VueRouter);\n\nconst routes = [\n  {\n    path: '/',\n    name: 'App',\n    meta: { isReload: false },\n    component: App,\n    redirect: { name: 'TicTacToe' },\n  },\n  {\n    path: '/TicTacToe',\n    name: 'TicTacToe',\n    meta: { isReload: true },\n    component: TicTacToe,\n  },\n  {\n    path: '/Square',\n    name: 'Square',\n    meta: { isReload: true },\n    component: Square,\n  },\n  {\n    path: '/Bird',\n    name: 'Bird',\n    meta: { isReload: true },\n    component: Bird,\n  },\n  {\n    path: '/Snake',\n    name: 'Snake',\n    meta: { isReload: true },\n    component: Snake,\n  },\n];\n\nexport default new VueRouter({ routes });\n","import Vue from 'vue';\n\nimport App from '@/App.vue';\nimport router from './router';\n\nVue.config.productionTip = false;\nVue.config.silent = process.env.NODE_ENV === 'production';\n\nnew Vue({\n  name: 'App',\n  router,\n  render: (h) => h(App),\n}).$mount('#app');\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./TicTacToe.vue?vue&type=style&index=0&id=2776d3bd&lang=scss&scoped=true&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./TicTacToe.vue?vue&type=style&index=0&id=2776d3bd&lang=scss&scoped=true&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Snake.vue?vue&type=style&index=0&id=dfc1b6ae&lang=scss&scoped=true&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Snake.vue?vue&type=style&index=0&id=dfc1b6ae&lang=scss&scoped=true&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Square.vue?vue&type=style&index=0&id=1da70bd2&scoped=true&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Square.vue?vue&type=style&index=0&id=1da70bd2&scoped=true&lang=css&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=d878f2aa&lang=scss&scoped=true&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=d878f2aa&lang=scss&scoped=true&\""],"sourceRoot":""}